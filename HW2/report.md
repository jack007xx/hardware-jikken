# ハードウェア実験2課題レポート

## 調査課題2-1
1相励磁のステッピングモーターで，コイルのインダクタンスがLとする。
コイルの自己誘導によって逆起電力が発生し，インダクタンスに比例して電流の立ち上がりが遅れる。

外部抵抗がゼロのとき，時定数は$\frac{L}{2}$になる。
挿入する外部抵抗をRとすると新たな時定数は$\frac{L}{R+2}$となり，時定数は$\frac{2}{R+2}$倍に向上する。

供給するべき電源電圧は，$(R+2)\cdot1.75[V]$である。
このとき外部抵抗で消費される電力は$R\cdot1.75^2[W]$となる。

この方法では，回路の設計は簡単だが外部抵抗で消費される電力が無駄になってしまう。
そのため大きなモータでは損失電力が無視できない大きさになる。
この他に考えられる方法として，インダクタンスの低いモータを使用する方法，電源系統を2系統用意する方法，チョッパ制御を行う方法がある。

電源系統を2系統用意した制御では，コイルに流れる電流を監視(あるいは時定数から逆算)して電流が目標値に達するまでは定格以上の電圧を印加し，それ以降は定格の電圧に切り替える。
高電圧電源，定格電圧電源を並列に接続し高圧側にスイッチを，低圧側に整流ダイオードを配置し，目標電流でスイッチングする。
この回路によって，立ち上がりの特性は目標値まで高電圧に合わせた特性になる。

チョッパ制御では，定格の数倍の電圧を持つ電源を高速にオンオフすることで，オンオフ時間の比に応じた電流値を取り出す。
ここで，電流の立ち上がり時には電源電圧に応じた高速な立ち上がりで，安定時には定格電流値の上下を振動するような波形になる。

電流の立ち下がりは，より電圧降下の大きな経路を通ることで向上するため，流路のスイッチングの工夫によって向上させることができる。
## 調査課題2-2

ステッピングモータには，永久磁石形ステッピングモータ，可変リラクタンス形ステッピングモータ，ハイブリッド形ステッピングモータがある。
この分類を基にして特徴について述べる。

まず全形で共通の固定子の種類と特徴について記述し，その次に回転子について各形ごとの特徴を記述する。

### 固定子について
どの方式でも，ステッピングモータで固定子は強磁性体の鉄心にコイルを巻き付けたものを励磁することで駆動する(通常の電磁石と同じ)。
また独立に励磁されるコイルの数を相で表す。

通常のモータと同じように，磁束密度を高める目的で固定子はケースに接地される。

#### 巻方式と駆動方式について
極に巻かれたコイルの巻き方には，モノファイラ巻きとバイファイラ巻きがある。
モノファイラ巻きでは1つの極に1つのコイルが巻かれる。
このとき，コイルに電流を単方向にのみ流す駆動方式をユニポーラ駆動，双方向に電流を流して固定子の極性が一定でないものをバイポーラ駆動という。
スイッチング素子が多く必要なため，構造が複雑だが，バイポーラ駆動のほうがコイルの利用効率が良く，トルクが高い。

バイファイラ巻きの固定子では1つの極にコイルが2系統巻かれる。
2つのコイルそれぞれをユニポーラ駆動させることで極性が変更できる。
駆動時には常に半分のコイルが休んでいるため，固定子としての利用効率はモノファイラ巻きに劣る。
スイッチング素子はモノファイラ巻きユニポーラ駆動の倍必要だが，バイポーラ駆動よりは単純である。

ステッピングモータでは駆動回路は主に専用ICとなり，通常比較的安価なので，モータ本体のサイズに対して利用効率の良いモノファイラ巻きバイポーラ駆動が使われる。

#### 励磁方法について
固定子の各相をどの組み合わせで励磁するかによって1相励磁，2相励磁，1-2相励磁がある。
また駆動回路によってマイクロステップ駆動を行うこともできる。
各方式によって得られるトルク特性やステップ数が異なる。

まず，1相励磁では単純に各相が順番に励磁され，2相励磁では常に隣り合う2つの相が同時に励磁されている。
1相，2相励磁ともにステップ角はモータ固有のフルステップ角になるが，静止位置の位相は$\frac{1}{2}$ステップだけずれる。
トルク特性は異なり，2相励磁の場合，固定子2つによる合成磁界が回転子に作用するため，流れる電流が同じであるならば$2\cdot\cos(\frac{ステップ角}{2})$倍になる。(2相4極のコイルの場合1相に比べ$\sqrt{2}$倍のトルクが発生)
しかし，常に2つのコイルに電流を供給する必要があるので1相に比べて消費電力に対するトルクの効率は悪化する。

1-2相励磁では，1相励磁と2相励磁が交互に繰り返される。
これによってステップ角はフルステップ角の倍になる。
前述のトルク特性によって流れる電流が同じ量のとき，励磁される相の数によって変動する。
これによって，負荷によっては振動が発生することが考えられる。
これを解決するためには1相励磁のときに電流を多く流すか，2相励磁のときに流れる電流を絞る方法がある。
電流の比は，前述の1，2相のトルク比から導くことができる。

更にステップ角を細かくすることを考えると，1-2相励磁の電流制御を応用して，2つの相を励磁するときに異なる電流を流すことが考えられる。
これにより電流量比に応じた合成磁界を生成し，任意の位置で静止させることができる。
これをモータのドライバICで制御するものをマイクロステップ駆動という。

### 回転子について
回転子の性質，形状は駆動方式によって異なるので，それぞれ別に記述する。

#### 永久磁石形ステッピングモータ
回転子に永久磁石を用いたステッピングモータは永久磁石形ステッピングモータとなる。
動作原理は，通常の磁気の吸引力である。
2極の磁石だけではなく，ステップ角向上のためにリング磁石の周に複数の磁極を持つような永久磁石なども使われる。

永久磁石形のステッピングモータは，通電していない状態でもレンツの法則によって，回転子の運動を妨げる向きにコイルに電流が流れるため，一定のトルクを保持することができる(ディテントトルク)。
一方で，永久磁石は磁石固有のキュリー温度を超えると磁性体としての性質を失ってしまう欠点がある。

#### 可変リラクタンス形ステッピングモータ
回転子に透磁率の高い磁性体を用いたステッピングモータは可変リラクタンス形ステッピングモータとなる。
動作原理として，磁力線に磁気抵抗の小さい経路を通させようと回転子に加わる力(リラクタンストルク)を利用する。
磁力線は空気中よりも透磁率の高い回転子の中を通ろうとして湾曲し，引き戻す力を生ずるので，回転子の形状を工夫することでステップ駆動をさせることができる。
そのため，永久磁石形のように丸型の回転子ではなく，複数の突極をもった歯車上の回転子を使う(具体的な形状の工夫は後述する)。

コイルの励磁によって回転子を通る磁界が変化すると，磁束と垂直に渦電流が発生する。
渦電流は熱エネルギーとなって完全な損失となるので，回転子には電気を通しにくく透磁率の高い物質を用いる(ケイ素鋼など)。
また，絶縁体で覆われた薄い板を重ねた積層鉄心を用いることで，渦電流のによる損失を低減している。

永久磁石は衝撃に弱く，温度による変性があり，リラクタンス形の回転子に比べ高価であるので，そのような特性が好まれない局面では可変リラクタンス形が用いられる。
しかし，永久磁石形に比べて強力な磁気回路を作れない，ディテントトルクを生じないためトルクの保持に通電が必須であり，省力化が難しく発熱が大きいといった欠点があり，現在主流ではない。

#### リラクタンス形の固定子と回転子の形状
ステップ数を向上させるためにリラクタンス形モータでは固定子と回転子の形状を工夫している。
具体的には，回転子に歯車上の突起をつけ，固定子に同じ幅の突起を，隣り合う相同士で位相を$\frac{1}{相数}$ずつずらして配置している。
これによって，磁束の道を作りながらステップ数を増加させることができる。

#### ハイブリッド形ステッピングモータ
ハイブリッド形ステッピングモータでは，永久磁石形のトルクの強さと，リラクタンス形の構造によるステップ数の向上を両立させている。
ハイブリッド形は固定子として，バイポーラ駆動で複数の突極をもつものを用いて，SN両方に磁化させる。

回転子には，2つの歯車状の磁性体が使われる，
中心の永久磁石によって，それぞれSNに着磁され，ステップ角の$\frac{1}{2}$だけずらして配置される。
静止時には正対した突極を引きつける極性を固定子に与えることで静止トルクを得る。
着磁されていない固定子には，正対からステップ角の$\frac{1}{4}$だけずれた位置に回転子の歯があるので，SNどちらかに着磁させることで任意の方向におくることができる。

構造や制御は比較的複雑だが，トルクの変動もなく分解能も0.8度，1.8度など細かく設定できるので，現在主流となっている。

## 調査課題2-3
ユニポーラ2相励磁のステッピングモータの台形制御を考える。
まず，ステップ角と目的の回転量から全体で必要なパルス回数を決定する。
トルクは一定と考えて，最大自起動周波数から最大応答周波数まで加速する。

パルスの加速度は一定なので，ステップごとに間隔を狭める。
目的ステップ数の半分に達した時点でステップ間隔を広げる。
これで三角制御になるので，最大応答周波数に達した時点で間隔を一定に保てば台形制御となる。

このプログラムでは，ステップごとにパルス間隔を定数から計算した。
低速なコンピュータを使って制御する際には，予めテーブルをメモリ上に計算しておいて配列から呼び出したほうが速度が正確になる可能性がある。

>坪井正太郎（101830245）
